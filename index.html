<!doctype html>
<html xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>reveal.js</title>

    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/night.css">

    <!-- Theme used for syntax highlighting of code -->
    <link rel="stylesheet" href="lib/css/monokai.css">

    <!-- Printing and PDF exports -->
    <script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );










    </script>

    <style type="text/css">
.no-border{
            box-shadow: none !important;
            border: 0px !important;
            background: none !important;
        }










    </style>
</head>
<body>
<div class="reveal">
    <div class="slides">
        <section>
            <h3>
                [Flutter]<br>
                No 3rd party library available?<br>
                Let’s do our own!
            </h3>
            <br>
            <h4>Jacek Krasowski</h4>
            <aside class="notes" data-markdown>
                * career started 2014, Android dev
                * currently Intive - worked on few projects during that time, mostly VOD apps
                * last November - Flutter dev, 1 commercial app delivered
                * do I like it? It has potential, I'm an enthusiast :)
                * adventure
            </aside>
        </section>

        <section>
            <section>
                <h3>What is Flutter</h3>
            </section>

            <section>
                <h3> UI software development kit created by Google. </h3>

                <aside class="notes">
                    open-source UI SDK created by Google.
                    long story short - a framework for crossplatform development using single codebase
                </aside>
            </section>

            <section>
                <h3>Timeline</h3>
                <p class="fragment">2015 &#8594; First version of flutter framework was announced</p>
                <p class="fragment">2018, December &#8594; Flutter 1.0 - "stable" version.</p>
                <p class="fragment">2019, December &#8594; Flutter 1.12 (Current version)</p>

                <aside class="notes" data-markdown>
                    * first - android only
                    * current master 1.15
                </aside>
            </section>

            <section>
                <h3>Supported platforms:</h3>
                <ul>
                    <li class="fragment"><strong>Android</strong></li>
                    <li class="fragment"><strong>iOS</strong></li>
                    <br/>
                    <li class="fragment">Windows</li>
                    <li class="fragment">Mac</li>
                    <li class="fragment">Linux</li>
                    <li class="fragment">Google Fuchsia</li>
                    <li class="fragment">Web</li>
                </ul>
            </section>

            <section>
                <h3>Take it?</h3>
                <ul>
                    <li class="fragment fade-in">
                        Android & iOS apps from the same codebase (Less testing)
                    </li>
                    <li class="fragment fade-in">
                        The same app UI on older devices
                    </li>
                    <li class="fragment fade-in">
                        Flutter speeds up development (i.e. hot reload)
                    </li>
                    <li class="fragment fade-in">
                        Easy-to-learn development language for existing mobile developers
                    </li>
                    <li class="fragment fade-in">
                        Adding and publishing new libraries is fairly simple
                    </li>
                    <li class="fragment fade-in">
                        Community is growing
                    </li>
                </ul>

            </section>
            <section>
                <h3>... or leave it?</h3>
                <p class="fragment">
                    In the real world it’s not that shiny yet… but it's getting better and better
                </p>
                <ul>
                    <li class="fragment fade-in">
                        Libraries & support
                    </li>
                    <li class="fragment fade-in">
                        New language, new framework (con?)
                    </li>
                    <li class="fragment fade-in">
                        Designed for universal UI
                    </li>
                </ul>

                <p class="fragment">Not many, huh?</p>
                <aside class="notes" data-markdown>
                    * issues; camera with and its rotation, webView support, qrcode scanner

                </aside>

            </section>
        </section>

        <section>

            <h3>Flutter project types:</h3>
            <ul>
                <li class="fragment"><strong>Application</strong></li>
                <li class="fragment"><strong>Package</strong></li>
                <li class="fragment"><strong>Module</strong></li>
                <li class="fragment"><strong>Plugin</strong></li>
            </ul>
            <aside class="notes" data-markdown>
                * &#8594; for end users, apk or ipa
                * &#8594; pure Dart component, like new Widget
                * &#8594; integrating one full-screen Flutter instance at a time per app
                * &#8594; library with native implementations
            </aside>
        </section>
        <section>
            <section>
                <h3>Tools</h3>
                <aside class="notes" data-markdown>
                    * How to use flutter framework and what tools have it integrated
                </aside>
            </section>
            <section>

                <h3>IDEs</h3>
                <span class="fragment">
                <img class="no-border" data-src="images/as_icon.png" height="200" width="200">
                <img class="no-border" data-src="images/intelij.png" height="200" width="200">
                </span>
                <img class="fragment no-border" data-src="images/vs_code_icon.png" height="200" width="200">

                <h3 class="fragment">or</h3>
                <img class="fragment no-border" data-src="images/terminal_icon.png" height="200" width="200">

                <aside class="notes" data-markdown>
                    * IDEs giving us user friendly UI
                    * and terminal is using flutter framework directly
                </aside>
            </section>

            <section>
                <h3>Android Studio</h3>
                <img class=" no-border" data-src="images/as_icon.png" height="200" width="200">
                <pre>
                    <code class="plaintext" data-trim data-noescape>
                        File
                        New Flutter Project
                        Choose between Application/Package/Plugin/Module
                    </code>
                </pre>
            </section>
            <section>
                <h3>Visual Studio Code</h3>
                <img class=" no-border" data-src="images/vs_code_icon.png" height="200" width="200">
                <pre>
                    <code class="plaintext" data-trim data-noescape>
                        Start Command Palette [Cmd] [shift] [P]
                        Type: 'Flutter: New Project' (Only Flutter Application)
                    </code>
                </pre>
            </section>
            <section>
                <h3>Terminal</h3>
                <img class=" no-border" data-src="images/terminal_icon.png" height="200" width="200">
                <pre>
                    <code class="plaintext" data-trim data-noescape>
                        All options available here
                    </code>
                </pre>
            </section>

        </section>

        <section>
            <section>
                <h3>Let's do something serious now</h3>
                <img class="no-border" data-src="images/cat_serious.gif">
            </section>

            <section>
                <h3>Creation of new Plugin</h3>
                <pre><code class="plaintext" data-line-numbers="1|2|3|4|5|6|7|8|9" data-trim>
                    flutter create \
                    > --org com.jk \
                    > --template=plugin \
                    > -i swift \
                    > -a kotlin \
                    > --androidx \
                    > --project-name battery_state_reader
                    > --description "Plugin reading battery state and level"
                    > BatteryStateReader

                    </code></pre>

                <aside class="notes" data-markdown>
                    * create overrides
                    * org - package name/prefix in the iOS bundle identifier in 'reversed domain name notation'
                    * template specifying project type (app/module/package/plugin) - app default
                    * androidx (disabling by adding --no-androidx - by default enabled)
                    * project-name The project name for this new Flutter project. This must be a valid dart package name.
                    * run -> sample Flutter Application inside
                </aside>
            </section>

            <section>
                <h4>Plugin project overview</h4>
                <img class="no-border" data-src="images/ss_overview_plugin.png">

                <aside class="notes">
                    The “android” and “ios” directories hold a complete Android and iOS app respectively with all their respective files.
                    For example if you go into “android” you’ll find a complete Android project including a manifest.xml, activities, gradle
                    files, etc. If you want to write any platform-specific code or add permissions, you’ll have to edit these projects.
                    The “lib” directory holds all your .dart files and most if not all your code will rest over here.
                </aside>
            </section>

            <section>
                <h4>Android project overview</h4>
                <img class="no-border" data-src="images/ss_overview_android.png">
            </section>

            <section>
                <h4>iOS project overview</h4>
                <img class="no-border" data-src="images/ss_overview_ios.png">
            </section>

            <section>
                <h4>Example project overview</h4>
                <img class="no-border" data-src="images/ss_overview_example.png">
            </section>

            <section>
                <h4>lib/sampleBatteryStateReader.dart</h4>
                <pre><code class="dart" data-trim data-noescape data-line-numbers="1|2-3|5-9|11-15">
class BatteryStateReader {
  static const MethodChannel _channel =
      const MethodChannel('battery_state_reader');

  static Future&ltString&gt get batteryStatus async {
    final String batteryStatus =
        await _channel.invokeMethod('getBatteryStatus');
    return batteryStatus;
  }

  static Future&ltint&gt get batteryPercentage async {
    final int batteryPercentage =
        await _channel.invokeMethod('getBatteryPercentage');
    return batteryPercentage;
  }
}

                </code></pre>
                <aside class="notes" data-markdown>
                    * primitives, lists and maps only, objects has to be serialized ie as JSON and deserialized on Dart side

                </aside>
            </section>
            <section>
                <h4>android/../BatteryStateReaderPlugin.kt</h4>
                <pre><code class="kotlin" data-trim data-noescape data-line-numbers="1-3|4-6|8-13">
class BatteryStateReaderPlugin :
  FlutterPlugin, MethodCallHandler {

  private var applicationContext: Context? = null
  private var batteryManager: BatteryManager? = null
  private var methodChannel: MethodChannel? = null

  override fun onAttachedToEngine(fpd: FlutterPluginBinding) {
    onAttachedToEngine(
      fpd.applicationContext,
      fpd.binaryMessenger
    )
  }

  private fun onAttachedToEngine(
    applicationContext: Context,
    messenger: BinaryMessenger
  ) {
    this.applicationContext = applicationContext
    val service = applicationContext.getSystemService(BATTERY_SERVICE)
    batteryManager = service as BatteryManager
    methodChannel = MethodChannel(messenger, "battery_state_reader")
    methodChannel?.setMethodCallHandler(this)
  }
                </code></pre>
                <aside class="notes" data-markdown>
                    * Plugin is extending Flutter Plugin to let it be instantiated (attached to engine) by FlutterActivity
                    * MethodCallHandler an interface, its implementation will hold logic for channel calls from dart caller

                    * context used for Android specific usages
                    * methodChannel for disposing purposes

                    * onAttachedToEngine is about to be called on FlutterActivity for registering


                </aside>
            </section>

            <section>
                <h4>android/../BatteryStateReaderPlugin.kt</h4>
                <pre><code class="kotlin" data-trim data-noescape data-line-numbers="1-12">
private fun onAttachedToEngine(
  applicationContext: Context,
  messenger: BinaryMessenger
) {
  this.applicationContext = applicationContext
  val service =
    applicationContext.getSystemService(BATTERY_SERVICE)
  batteryManager = service as BatteryManager
  methodChannel =
    MethodChannel(messenger, "battery_state_reader")
  methodChannel?.setMethodCallHandler(this)
}

companion object {
  @JvmStatic
  fun registerWith(registrar: Registrar) {
    BatteryStateReaderPlugin().onAttachedToEngine(
      registrar.context(),
      registrar.messenger()
    )
  }
}
                </code></pre>
            </section>

            <section>
                <h4>android/../BatteryStateReaderPlugin.kt</h4>
                <pre><code class="kotlin" data-trim data-noescape data-line-numbers="3-8|11-16">
companion object {
  @JvmStatic
  fun registerWith(registrar: Registrar) {
    BatteryStateReaderPlugin().onAttachedToEngine(
      registrar.context(),
      registrar.messenger()
    )
  }
}

override fun onDetachedFromEngine(fpd: FlutterPluginBinding) {
  applicationContext = null
  batteryManager = null
  methodChannel?.setMethodCallHandler(null)
  methodChannel = null
}
                </code></pre>
                <aside class="notes" data-markdown>
                    * Starting 1.12 new embedding system started for better lifecycle management
                    * register with Registrar is about to be deprecated, left for backward compatibility, so users working on pre 1.12
                    flutter
                    * onDetachedFromEngine called on Activity/fragment destroy. Clear all...
                </aside>
            </section>

            <section>
                <h4>android/../BatteryStateReaderPlugin.kt</h4>
                <pre><code class="kotlin" data-trim data-noescape data-line-numbers="1-13">
override fun onMethodCall(call: MethodCall, result: Result) {
  when (call.method) {
    "getBatteryPercentage" -> {
      result.success(getBatteryPercentage())
    }
    "getBatteryStatus" -> {
      result.success(getBatteryStatus())
    }
    else -> {
      result.notImplemented()
    }
  }
}

private fun getBatteryPercentage() =
  batteryManager?.getIntProperty(BATTERY_PROPERTY_CAPACITY) ?: -1

private fun getBatteryStatus() =
  when (batteryManager?.getIntProperty(BATTERY_PROPERTY_STATUS)) {
    BATTERY_STATUS_CHARGING -> "charging"
    BATTERY_STATUS_DISCHARGING -> "discharging"
    BATTERY_STATUS_FULL -> "full"
    else -> "unknown"
  }
                </code></pre>
                <aside class="notes" data-markdown>
                    *
                </aside>
            </section>

            <section>
                <h4>android/../BatteryStateReaderPlugin.kt</h4>
                <pre><code class="kotlin" data-trim data-noescape data-line-numbers="1-3|5-12">
private fun getBatteryPercentage() =
  batteryManager?.getIntProperty(BATTERY_PROPERTY_CAPACITY)
    ?: -1

private fun getBatteryStatus() =
  when (
    batteryManager?.getIntProperty(BATTERY_PROPERTY_STATUS)) {
    BATTERY_STATUS_CHARGING -> "charging"
    BATTERY_STATUS_DISCHARGING -> "discharging"
    BATTERY_STATUS_FULL -> "full"
    else -> "unknown"
  }
                </code></pre>
                <aside class="notes" data-markdown>
                    *
                </aside>
            </section>

            <section>
                <h4>iOS/../SwiftBatteryStateReaderPlugin.swift</h4>
                <pre><code class="swift" data-trim data-noescape data-line-numbers="1-2|4-13">
public class SwiftBatteryStateReaderPlugin:
NSObject, FlutterPlugin {

  public static func register(
    with registrar: FlutterPluginRegistrar) {
    let methodChannel =
      FlutterMethodChannel(
        name: "battery_state_reader",
        binaryMessenger: registrar.messenger())
    let instance = SwiftBatteryStateReaderPlugin()
    registrar.addMethodCallDelegate(
      instance, channel: methodChannel)
  }

  public func handle(_ call: FlutterMethodCall,
                     result: @escaping FlutterResult) {
    switch call.method {
    case "getBatteryStatus":
      result(getBatteryStatus())
      break
    case "getBatteryPercentage":
      result(getBatteryLevel())
      break
    default:
      result(FlutterMethodNotImplemented)
      break
    }
  }
                </code></pre>
                <aside class="notes" data-markdown>
                    *
                </aside>
            </section>

            <section>
                <h4>iOS/../SwiftBatteryStateReaderPlugin.swift</h4>
                <pre><code class="swift" data-trim data-noescape data-line-numbers="1-13">
  public func handle(_ call: FlutterMethodCall,
                   result: @escaping FlutterResult) {
    switch call.method {
      case "getBatteryStatus":
        result(getBatteryStatus())
        break
      case "getBatteryPercentage":
        result(getBatteryLevel())
        break
      default:
        result(FlutterMethodNotImplemented)
        break
  }

  func getMonitorableDevice() -> UIDevice{
    let device = UIDevice.current
    device.isBatteryMonitoringEnabled = true
    return device
  }
                </code></pre>
                <aside class="notes" data-markdown>
                    *
                </aside>
            </section>

            <section>
                <h4>iOS/../SwiftBatteryStateReaderPlugin.swift</h4>
                <pre><code class="swift" data-trim data-noescape data-line-numbers="1-5|7-13">
func getMonitorableDevice() -> UIDevice{
  let device = UIDevice.current
  device.isBatteryMonitoringEnabled = true
  return device
}

func getBatteryLevel() -> Int {
  var battteryLevel = getMonitorableDevice().batteryLevel
  if (battteryLevel > 0){
    battteryLevel = battteryLevel * 100
  }
  return Int(battteryLevel)
}

func getBatteryStatus() -> String{
  var state: String
  switch (getMonitorableDevice().batteryState) {
  case .full:
    state = "full"
    break
                </code></pre>
                <aside class="notes" data-markdown>
                    *
                </aside>
            </section>

            <section>
                <h4>iOS/../SwiftBatteryStateReaderPlugin.swift</h4>
                <pre><code class="swift" data-trim data-noescape data-line-numbers="1-16">
func getBatteryStatus() -> String{
  var state: String
  switch (getMonitorableDevice().batteryState) {
  case .full:
    state = "full"
    break
  case .charging:
    state = "charging"
    break
  case .unplugged:
    state = "discharging"
    break
  default: state = "unknown"
  }
  return state
}
                </code></pre>
                <aside class="notes" data-markdown>
                    *
                </aside>
            </section>

            <section>
                <h4>example/../main.dart</h4>
                <pre><code class="dart" data-trim data-noescape data-line-numbers="">
void main() => runApp(MyApp());

class MyApp extends StatefulWidget {
  @override
  _MyAppState createState() => _MyAppState();
}
                </code></pre>
                <aside class="notes" data-markdown>
                    *
                </aside>
            </section>

            <section>
                <h4>example/../main.dart</h4>
                <pre><code class="dart" data-trim data-noescape data-line-numbers="1|2-3|5-9">
class _MyAppState extends State&ltMyApp&gt {
  int _batteryPercentage = -1;
  String _batteryStatus = "unknown";

  @override
  void initState() {
    super.initState();
    initBatteryEntries();
  }

  Future&ltvoid&gt initBatteryEntries() async {
    _batteryPercentage = await BatteryStateReader.batteryPercentage;
    _batteryStatus = await BatteryStateReader.batteryStatus;

    if (!mounted) return;

    setState(() {});
  }

                </code></pre>
                <aside class="notes" data-markdown>
                    *
                </aside>
            </section>
            <section>
                <h4>example/../main.dart</h4>
                <pre><code class="dart" data-trim data-noescape data-line-numbers="1-9">
Future&ltvoid&gt initBatteryEntries() async {
  _batteryPercentage =
    await BatteryStateReader.batteryPercentage;
  _batteryStatus = await BatteryStateReader.batteryStatus;

  if (!mounted) return;

  setState(() {});
}

@override
Widget build(BuildContext context) {
  return MaterialApp(
    home: Scaffold(
      appBar: AppBar(
        title: const Text('BatteryStateReader example app'),
      ),
      body: Center(
            child: Text(
              '$_batteryPercentage%\n\n'
              '$_batteryStatus',
              style: TextStyle(fontSize: 64),
              textAlign: TextAlign.center,
            ),
          ),
    ),
  );
}

                </code></pre>
                <aside class="notes" data-markdown>
                    *
                </aside>
            </section>
            <section>
                <h4>example/../main.dart</h4>
                <pre><code class="dart" data-trim data-noescape data-line-numbers="">
@override
Widget build(BuildContext context) {
  return MaterialApp(
    home: Scaffold(
      appBar: AppBar(
        title: const Text('BatteryStateReader example app'),
      ),
      body: Center(
        child: Text('Battery percentage: $_batteryPercentage%\n'
            'battery status: $_batteryStatus'),
      ),
    ),
  );
}

                </code></pre>
                <aside class="notes" data-markdown>
                    *
                </aside>
            </section>

            <section>
                <h3>Does this work?</h3>
                <div class="fragment">
                    <img class="no-border" data-src="images/ss_ios1.png" height="500">
                    <img class="no-border" data-src="images/ss_android1.jpg" height="500">
                </div>
            </section>

        </section>

        <section>
            <section>
                <h3>Should I pour more?</h3>
                <h3> Maybe a stream?</h3>
                <img class="no-border" data-src="images/more.gif">
            </section>

            <section>
                <h3>Let's add stream support</h3>
                <br/>
                <p>EventChannel</p>
                <p>Setting up listeners</p>
            </section>

            <section><h3>What needs to be added?</h3></section>

            <section>
                <h3>battery_state_reader.dart</h3>
                <pre><code data-trim data-noescape>
static Stream&lt;String&gt; get batteryStateChanged =>
      EventChannel('battery_state_reader_event_channel')
          .receiveBroadcastStream()
          .map((dynamic event) => event);
                </code></pre>
                <aside class="notes" data-markdown>
                    *
                </aside>
            </section>
            <section>
                <h3>android</h3>
                <pre><code data-trim data-noescape data-line-numbers="2| 6-7 ">
class BatteryStateReaderPlugin : FlutterPlugin, MethodCallHandler,
  EventChannel.StreamHandler {
  private var applicationContext: Context? = null
  private var batteryManager: BatteryManager? = null
  private var methodChannel: MethodChannel? = null
  private var eventChannel: EventChannel? = null
  private var batteryStateReceiver: BroadcastReceiver? = null
                </code></pre>
                <aside class="notes" data-markdown>
                    *
                </aside>
            </section>
            <section>
                <h3>android</h3>
                <pre><code data-trim data-noescape data-line-numbers=" 10-15 ">
private fun onAttachedToEngine(
  applicationContext: Context,
  messenger: BinaryMessenger
) {
  this.applicationContext = applicationContext
  val service = applicationContext.getSystemService(BATTERY_SERVICE)
  batteryManager = service as BatteryManager
  methodChannel = MethodChannel(messenger, "battery_state_reader")
  methodChannel?.setMethodCallHandler(this)
  eventChannel = EventChannel(
    messenger,
    "battery_state_reader_event_channel"
  )
  eventChannel?.setStreamHandler(this)
}
                </code></pre>
                <aside class="notes" data-markdown>
                    *
                </aside>
            </section>
            <section>
                <h3>android</h3>
                <pre><code data-trim data-noescape data-line-numbers=" 1-11|13-16 ">
override fun onListen(
    arguments: Any?,
    events: EventSink?
  ) {
    batteryStateReceiver =
      createChargingStateChangeReceiver(events)
    applicationContext?.registerReceiver(
      batteryStateReceiver,
      IntentFilter(Intent.ACTION_BATTERY_CHANGED)
    )
  }

override fun onCancel(arguments: Any?) {
  applicationContext?.unregisterReceiver(batteryStateReceiver)
  batteryStateReceiver = null
  }
                </code></pre>
                <aside class="notes" data-markdown>
                    *
                </aside>
            </section>
            <section>
                <h3>android</h3>
                <pre><code data-trim data-noescape data-line-numbers=" ">
private fun createBatteryStateReceiver(events: EventSink?):
        BroadcastReceiver {
  return object : BroadcastReceiver() {
    override fun onReceive(
      context: Context?,
      intent: Intent?
    ) {
      events?.success(getBatteryStatus())
    }
  }
}
                </code></pre>
                <aside class="notes" data-markdown>
                    *
                </aside>
            </section>
            <section>
                <h3>iOS</h3>
                <pre><code data-trim data-noescape data-line-numbers="10-14">
public static func register(
    with registrar: FlutterPluginRegistrar) {
    let methodChannel =
      FlutterMethodChannel(
        name: "battery_state_reader",
        binaryMessenger: registrar.messenger())
    let instance = SwiftBatteryStateReaderPlugin()
    registrar.addMethodCallDelegate(
      instance, channel: methodChannel)
    let eventChannel =
      FlutterEventChannel(
        name: "battery_state_reader_event_channel",
        binaryMessenger: registrar.messenger())
    eventChannel.setStreamHandler(instance)
  }
                </code></pre>
                <aside class="notes" data-markdown>
                    *
                </aside>
            </section>
            <section>
                <h3>iOS</h3>
                <pre><code data-trim data-noescape data-line-numbers="">
public func onListen(
  withArguments arguments: Any?,
  eventSink: @escaping FlutterEventSink) -> FlutterError? {
  self.eventSink = eventSink
  sendBatteryStateEvent()
  NotificationCenter.default.addObserver(
    self,
    selector: #selector(handleBatteryStatusChange),
    name: UIDevice.batteryStateDidChangeNotification,
    object: nil)
  return nil
}
                </code></pre>
                <aside class="notes" data-markdown>
                    *
                </aside>
            </section>
            <section>
                <h3>iOS</h3>
                <pre><code data-trim data-noescape data-line-numbers="1-8|10-15">
private func sendBatteryStateEvent() {
  guard let eventSink = eventSink else { return }
  eventSink(getBatteryStatus())
}

@objc func handleBatteryStatusChange() {
  sendBatteryStateEvent()
}

public func onCancel(
  withArguments arguments: Any?) -> FlutterError? {
  NotificationCenter.default.removeObserver(self)
  eventSink = nil
  return nil
}
                </code></pre>
                <aside class="notes" data-markdown>
                    *
                </aside>
            </section>

            <section>
                <h3>example</h3>
                <pre><code data-trim data-noescape>
Align(
    alignment: Alignment.bottomCenter,
    child: StreamBuilder(
        stream: BatteryStateReader.batteryStateChanged,
        builder: (context, state) {
          Color batteryStateColor = Colors.red;
          if (state.data == "charging" || state.data=="full")
                batteryStateColor = Colors.green;
          return Text(
            state.data,
            style: TextStyle(
              fontSize: 64,
              color: batteryStateColor,
            ),
          );
        }),
  )
                </code></pre>
                <aside class="notes" data-markdown>
                    *
                </aside>
            </section>

            <section>
                <h3>Result?</h3>
                <img class="no-border" data-src="images/movie_ios.gif" height="500">
                <img class="no-border" data-src="images/movie_android.gif" height="500">
            </section>
        </section>


        <section>
            <section>

                <h3>Let's publish it</h3>

            </section>
            <section>

                <h3>Steps</h3>
                <br/>
                <p class="fragment">Push to github</p>
                <p class="fragment">run 'flutter packages pub publish —dry -run'</p>
                <img class="fragment no-border" data-src="images/ss_publish_warnings.png"/>

            </section>
            <section>

                <h4>Then</h4>
                <br/>
                <p class="fragment">Fix all the warnings...</p>
                <p class="fragment">Until you'll see</p>
                <img class="fragment no-border" data-src="images/ss_publish_no_warn.png"/>

            </section>
            <section>

                <h4>Then</h4>
                <br/>
                <p class="fragment">run 'flutter packages pub publish'</p>

                <img class="fragment no-border" data-src="images/ss_published.png"/>

                </code></pre>
                <aside class="notes" data-markdown>
                    * updates
                    * usage in pubspec.yaml (dpendencies section)
                </aside>
            </section>
            <section>

                <img class="no-border" data-src="images/ss_pub.png"/>

            </section>

        </section>
        <section>
            <img class="no-border" data-src="images/no_more.gif">
        </section>
        <section>
            <h2>Thank you!</h2>

            <br>
            <img class="no-border" data-src="images/qr.png"><br/>
            <span>jacqqq.github.io/in_mobile</span><br/>

            <span>https://pub.dev/packages/battery_state_reader</span>

            <aside class="notes" data-markdown>
                *
                *
            </aside>
        </section>
    </div>
</div>

<script src="js/reveal.js"></script>

<script>
			// More info about config & dependencies:
			// - https://github.com/hakimel/reveal.js#configuration
			// - https://github.com/hakimel/reveal.js#dependencies
			Reveal.initialize({
				hash: true,
		transition: 'convex',
				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/highlight/highlight.js' },
					{ src: 'plugin/notes/notes.js', async: true }
				]
			});

































































</script>
</body>
</html>
